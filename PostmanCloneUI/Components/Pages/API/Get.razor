@page "/api/get"
@using System.ComponentModel.DataAnnotations

<PageTitle>Postman Clone by Harri Honkanen - GET Method</PageTitle>

<h2 class="mb-0">GET Method</h2>
<h6 style="color: gray">Retrieving Data from APIs</h6>

<EditForm Model="Model" OnValidSubmit="Submit" FormName="Get">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="mb-3">
        <label class="form-label">Url: </label>
        <InputText @bind-Value="Model!.Url" class="form-control" />
    </div>

    <div class="mb-3">
        <label class="form-label">Message: </label>
        <InputTextArea @bind-Value="Model!.Message" class="form-control" rows="10" />
    </div>
    <button class="btn btn-primary" type="submit">Submit</button>
</EditForm>

@code {

    [SupplyParameterFromForm]
    public GetFormModel? Model { get; set; }

    private void Submit()
    {
        if (Model is not null)
        {
            Model.Message = "Message";
        }
    }

    protected override void OnInitialized()
    {
        Model ??= new();
    }
    public class GetFormModel
    {
        [Required]
        [MinLength(10, ErrorMessage = "Url is too short.")]
        [MaxLength(200, ErrorMessage = "Url is too long.")]
        public string? Url { get; set; }
        public string? Message { get; set; }
    }
}